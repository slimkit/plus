(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{169:function(s,t,e){"use strict";e.r(t);var n=e(0),a=Object(n.a)({},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"content"},[s._m(0),s._v(" "),e("ul",[e("li",[e("a",{ref:"noopener noreferrer",attrs:{href:"https://nginx.org/en/docs/configure.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Building nginx from Sources"),e("OutboundLink")],1)])]),s._v(" "),s._m(1),s._v(" "),e("p",[s._v("我们打开 Nginx 的「"),e("a",{ref:"noopener noreferrer",attrs:{href:"https://nginx.org/en/download.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("下载页面"),e("OutboundLink")],1),s._v("」我们找到 "),e("code",[s._v("Stable version")]),s._v(" 列表中的版本，因为这是稳定版，推荐使用的版本，目前我这里最新的稳定版本是 "),e("code",[s._v("1.14.0")]),s._v(" 所以我以这个版本为例进行安装。")]),s._v(" "),e("p",[s._v("如下图：")]),s._v(" "),e("img",{attrs:{src:s.$withBase("/assets/img/guide/installation/nginx-download-page.png")}}),s._v(" "),s._m(2),s._v(" "),s._m(3),e("p",[s._v("这样的地址，然后我们登入 CentOS 服务器，进入家目录：")]),s._v(" "),s._m(4),e("p",[s._v("进入加目录后我们执行：")]),s._v(" "),s._m(5),s._m(6),s._v(" "),e("p",[s._v("接下来，我们将源码归档进行解压获得源码：")]),s._v(" "),s._m(7),s._m(8),s._v(" "),s._m(9),s._v(" "),s._m(10),s._v(" "),s._m(11),e("p",[s._v("然后在我们为其安装编译所需的工具和依赖：")]),s._v(" "),s._m(12),e("p",[s._v("安装完成依赖后，我们使用 cd 命令进入源码目录：")]),s._v(" "),s._m(13),s._m(14),s._v(" "),s._m(15),s._v(" "),s._m(16),s._m(17),s._v(" "),s._m(18),s._v(" "),s._m(19),s._v(" "),s._m(20),s._m(21),s._v(" "),s._m(22)])},[function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("本章将带领你在 "),t("strong",[this._v("CentOS")]),this._v(" "),t("code",[this._v("7.4")]),this._v(" 系统中安装 "),t("strong",[this._v("Nginx")]),this._v("。参考资料：")])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"下载"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下载","aria-hidden":"true"}},[this._v("#")]),this._v(" 下载")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("我们右键 "),t("code",[this._v("nginx-1.14.0")]),this._v(" 这个链接，选择复制链接地址，得到：")])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("https://nginx.org/download/nginx-1.14.0.tar.gz\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[this._v("cd")]),this._v(" ~\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[this._v("curl")]),this._v(" -L -o nginx-1.14.0.tar.gz https://nginx.org/download/nginx-1.14.0.tar.gz\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("下载完成。我们这个时候可以输入 "),t("code",[this._v("ls")]),this._v(" 命令查看文件列表进行确认。")])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("tar -zxvf nginx-1.14.0.tar.gz\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("我们就得到了 "),t("code",[this._v("~/nginx-1.14.0")]),this._v(" 这个目录。")])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"编译前配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#编译前配置","aria-hidden":"true"}},[this._v("#")]),this._v(" 编译前配置")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("安装前，我们需要提前为 Nginx 创建一个运行用户和用户组（这里定义为 "),t("code",[this._v("nginx:nginx")]),this._v("，默认不登录不创建家目录）：")])},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("groupadd")]),s._v(" nginx "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("useradd")]),s._v(" -s /sbin/nologin -g nginx -M nginx\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("yum "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y gc gcc gcc-c++ \\\npcre pcre-devel \\\nzlib zlib-devel \\\nopenssl openssl-devel\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[this._v("cd")]),this._v(" ~/nginx-1.14.0\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"编译"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#编译","aria-hidden":"true"}},[this._v("#")]),this._v(" 编译")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("在上面的步骤中，我们以及完成了所需的安装和配置，并进入了源码目录。接下来，我们生成 "),t("code",[this._v("Makefile")]),this._v(" 所需的文件：")])},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("./configure \\\n--user"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("nginx \\\n--group"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("nginx \\\n--prefix"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/nginx \\\n--sbin-path"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/nginx/nginx \\\n--conf-path"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/nginx/nginx.conf \\\n--pid-path"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/nginx/nginx.pid \\\n--http-log-path"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/var/log/nginx/access.log \\\n--with-http_ssl_module \\\n--with-http_v2_module \\\n--with-http_stub_status_module \\\n--with-http_gzip_static_module \\\n--with-pcre\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("执行完成后，我们运行 "),t("code",[this._v("make")]),this._v(" 命令，运行完成后我们再运行 "),t("code",[this._v("make install")]),this._v(" 命令即可。")])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"方便设置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#方便设置","aria-hidden":"true"}},[this._v("#")]),this._v(" 方便设置")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("现在，我们 Nginx 的启动命令文件在 "),t("code",[this._v("/usr/local/nginx/nginx")]),this._v(" 这个位置，每次进入这里操作不是很方便。所以，我们可以做一个软链，然后在全局都可以找到了。")])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[this._v("ln")]),this._v(" -s /usr/local/nginx/nginx /usr/local/sbin/nginx\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#命令","aria-hidden":"true"}},[this._v("#")]),this._v(" 命令")])},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ul",[e("li",[e("code",[s._v("nginx")]),s._v(" 启动 Nginx")]),s._v(" "),e("li",[e("code",[s._v("nginx -t")]),s._v(" 检查 Nginx 配置文件")]),s._v(" "),e("li",[e("code",[s._v("nginx -s stop")]),s._v(" 停止 Nginx")]),s._v(" "),e("li",[e("code",[s._v("nginx -s quit")]),s._v(" 正常退出 Nginxx")])])}],!1,null,null,null);t.default=a.exports}}]);